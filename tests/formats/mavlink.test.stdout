module MavNumerics
 
--- Imports:
 
--- Type defs:
type MavNumerics.Float1 = Choose { pos: bool
                                 ; neg: {}
                                 }
 
type MavNumerics.Float2 = { sign: MavNumerics.Float1
                          ; mantissa: uint 23
                          ; exponent: int
                          }
 
type MavNumerics.NonNegFloat0 = { nnMantissa: uint 23
                                ; nnExponent: int
                                }
 
type MavNumerics.InclusiveFractional0 = { incMantissa: uint 23
                                        ; incExponent: int
                                        }
 
type MavNumerics.Float = Choose { denormalized: uint 23
                                ; infty: MavNumerics.Float1
                                ; nan: {}
                                ; number: MavNumerics.Float2
                                ; zero: {}
                                }
 
type MavNumerics.NonNegFloat = Choose { nonNegZero: {}
                                      ; nonNegNumber: MavNumerics.NonNegFloat0
                                      ; nonNegInfty: bool
                                      ; nonNegDenorm: uint 23
                                      }
 
type MavNumerics.InclusiveFractional = Choose { inclusiveZero: {}
                                              ; inclusiveOne: {}
                                              ; inclusiveFrac: MavNumerics.InclusiveFractional0
                                              ; inclusiveDenorm: uint 23
                                              }
 
type MavNumerics.GeoCoord = { degs: int
                            ; mins: int
                            ; secs: int
                            ; decSecs: int
                            }
 
--- Rules:
 
MavNumerics.Guard (p : bool) : Grammar {} =
  case p is
    { true -> pure {}
    }
 
MavNumerics.Bool : Grammar bool =
  Choose biased
    { do @Match {'0'}
         ($$ : bool) <- pure false
         pure $$
    | do @Match {'1'}
         ($$ : bool) <- pure true
         pure $$
    }
 
MavNumerics.UInt16 : Grammar (uint 16) =
  do (hi : uint 8) <- Match UInt8
     (lo : uint 8) <- Match UInt8
     ($$ : uint 16) <- pure (hi # lo)
     pure $$
 
MavNumerics.HighBit : Grammar (uint 8) =
  pure (1 << 7)
 
MavNumerics.Int8 : Grammar int =
  do (dig : uint 8) <- Match UInt8
     ($$ : int) <- do (_140 : int) <- do (_139 : uint 8) <- do (_138 : uint 8) <- do (_137 : uint 8) <- MavNumerics.HighBit
                                                                                     pure (~ _137)
                                                               pure (dig .&. _138)
                                         pure (_139 as int)
                      (_143 : int) <- do (_142 : uint 8) <- do (_141 : uint 8) <- MavNumerics.HighBit
                                                               pure (dig .&. _141)
                                         pure (_142 as int)
                      pure (_140 - _143)
     pure $$
 
MavNumerics.Int24 : Grammar int =
  do (dig0 : uint 8) <- Match UInt8
     (dig1 : uint 8) <- Match UInt8
     (dig2 : uint 8) <- Match UInt8
     ($$ : int) <- do (_150 : int) <- do (_149 : uint 24) <- do (_148 : uint 16) <- do (_147 : uint 8) <- do (_146 : uint 8) <- do (_145 : uint 8) <- MavNumerics.HighBit
                                                                                                                                   pure (~ _145)
                                                                                                             pure (dig0 .&. _146)
                                                                                       pure (_147 # dig1)
                                                                pure (_148 # dig2)
                                         pure (_149 as int)
                      (_155 : int) <- do (_154 : uint 24) <- do (_153 : uint 24) <- do (_152 : uint 8) <- do (_151 : uint 8) <- MavNumerics.HighBit
                                                                                                             pure (dig0 .&. _151)
                                                                                       pure (_152 as uint 24)
                                                                pure (_153 << 16)
                                         pure (_154 as int)
                      pure (_150 - _155)
     pure $$
 
MavNumerics.Int32 : Grammar int =
  do (dig0 : uint 8) <- Match UInt8
     (dig1 : uint 8) <- Match UInt8
     (dig2 : uint 8) <- Match UInt8
     (dig3 : uint 8) <- Match UInt8
     ($$ : int) <- do (_163 : int) <- do (_162 : uint 32) <- do (_161 : uint 24) <- do (_160 : uint 16) <- do (_159 : uint 8) <- do (_158 : uint 8) <- do (_157 : uint 8) <- MavNumerics.HighBit
                                                                                                                                                          pure (~ _157)
                                                                                                                                    pure (dig0 .&. _158)
                                                                                                              pure (_159 # dig1)
                                                                                       pure (_160 # dig2)
                                                                pure (_161 # dig3)
                                         pure (_162 as int)
                      (_168 : int) <- do (_167 : uint 32) <- do (_166 : uint 32) <- do (_165 : uint 8) <- do (_164 : uint 8) <- MavNumerics.HighBit
                                                                                                             pure (dig0 .&. _164)
                                                                                       pure (_165 as uint 32)
                                                                pure (_166 << 24)
                                         pure (_167 as int)
                      pure (_163 - _168)
     pure $$
 
MavNumerics.Digit : Grammar int =
  do (_170 : uint 8) <- do (_169 : uint 8) <- Match ('0' .. '9')
                           pure (_169 - '0')
     pure (_170 as int)
 
MavNumerics.numBase ?a0 ?a1 ?a2 (Literal 0 ?a2) (HasKey ?a0 ?a1) (HasElement ?a0 ?a2) (Traversable ?a0) (Arith ?a2) (base : ?a2) (ds : ?a0) : ?a2 =
  for ((val : ?a2) = 0; (d : ?a2) in ds)
    ((val * base) + d)
 
MavNumerics.Natural (numDigs : uint 64) : Grammar int =
  do (_171 : [int]) <- Many[numDigs] MavNumerics.Digit
     pure (MavNumerics.numBase [int] (uint 64) int 10 _171)
 
MavNumerics.LowBits : Grammar (uint 8) =
  do (hb : uint 8) <- MavNumerics.HighBit
     ($$ : uint 8) <- pure (~ hb)
     pure $$
 
MavNumerics._Guard (p : bool) : Grammar {} =
  case p is
    { true -> pure {}
    }
 
MavNumerics.Float : Grammar MavNumerics.Float =
  do (dig0 : uint 8) <- Match UInt8
     (dig1 : uint 8) <- Match UInt8
     (mantissaLow : uint 16) <- MavNumerics.UInt16
     (hb : uint 8) <- MavNumerics.HighBit
     (signBit : uint 8) <- pure (dig0 .&. hb)
     (isPos : MavNumerics.Float1) <- Choose biased
                                       { {- pos -} do (_173 : bool) <- pure (signBit == 0)
                                                      pure {pos: _173}
                                       | {- neg -} do (_174 : {}) <- pure {}
                                                      pure {neg: _174}
                                       }
     (lbs : uint 8) <- MavNumerics.LowBits
     (mant : uint 23) <- pure (((dig1 .&. lbs as uint 23) << 16) .|. (mantissaLow as uint 23))
     (exp : uint 8) <- pure (((dig0 .&. lbs) << 1) .|. ((dig1 .&. hb) >> 7))
     ($$ : MavNumerics.Float) <- Choose biased
                                   { {- zero -} do (_177 : {}) <- do MavNumerics._Guard (exp == 0)
                                                                     ($$ : {}) <- MavNumerics.Guard (mant == 0)
                                                                     pure $$
                                                   pure {zero: _177}
                                   | {- denormalized -} do (_179 : uint 23) <- do MavNumerics._Guard (exp == 0)
                                                                                  ($$ : uint 23) <- pure mant
                                                                                  pure $$
                                                           pure {denormalized: _179}
                                   | {- infty -} do (_181 : MavNumerics.Float1) <- do MavNumerics._Guard (exp == 0xFF)
                                                                                      MavNumerics._Guard (mant == 0)
                                                                                      ($$ : MavNumerics.Float1) <- pure isPos
                                                                                      pure $$
                                                    pure {infty: _181}
                                   | {- nan -} do (_183 : {}) <- do MavNumerics._Guard (exp == 0xFF)
                                                                    ($$ : {}) <- MavNumerics.Guard (mant != 0)
                                                                    pure $$
                                                  pure {nan: _183}
                                   | {- number -} do (_184 : MavNumerics.Float2) <- do (sign : MavNumerics.Float1) <- pure isPos
                                                                                       (mantissa : uint 23) <- pure mant
                                                                                       (exponent : int) <- pure ((exp as int) - 127)
                                                                                       pure {sign = sign,
                                                                                             mantissa = mantissa,
                                                                                             exponent = exponent}
                                                     pure {number: _184}
                                   }
     pure $$
 
MavNumerics.NonNegFloat (f : MavNumerics.Float) : Grammar MavNumerics.NonNegFloat =
  Choose biased
    { {- nonNegZero -} do (_186 : {}) <- case f is
                                           { {| zero = _185 |} -> pure _185
                                           }
                          pure {nonNegZero: _186}
    | {- nonNegDenorm -} do (_188 : uint 23) <- case f is
                                                  { {| denormalized = _187 |} -> pure _187
                                                  }
                            pure {nonNegDenorm: _188}
    | {- nonNegInfty -} do (_192 : bool) <- do (s : MavNumerics.Float1) <- case f is
                                                                             { {| infty = _189 |} -> pure _189
                                                                             }
                                               ($$ : bool) <- case s is
                                                                { {| pos = _191 |} -> pure _191
                                                                }
                                               pure $$
                           pure {nonNegInfty: _192}
    | {- nonNegNumber -} do (_195 : MavNumerics.NonNegFloat0) <- do (n : MavNumerics.Float2) <- case f is
                                                                                                  { {| number = _193 |} -> pure _193
                                                                                                  }
                                                                    case n.sign is
                                                                      { {| pos = _194 |} -> pure {}
                                                                      }
                                                                    (nnMantissa : uint 23) <- pure (n.mantissa)
                                                                    (nnExponent : int) <- pure (n.exponent)
                                                                    pure {nnMantissa = nnMantissa,
                                                                          nnExponent = nnExponent}
                            pure {nonNegNumber: _195}
    }
 
MavNumerics.InclusiveFractional (f : MavNumerics.Float) : Grammar MavNumerics.InclusiveFractional =
  do (nnf : MavNumerics.NonNegFloat) <- MavNumerics.NonNegFloat f
     ($$ : MavNumerics.InclusiveFractional) <- Choose biased
                                                 { {- inclusiveZero -} do (_198 : {}) <- case nnf is
                                                                                           { {| nonNegZero = _197 |} -> pure _197
                                                                                           }
                                                                          pure {inclusiveZero: _198}
                                                 | {- inclusiveDenorm -} do (_200 : uint 23) <- case nnf is
                                                                                                  { {| nonNegDenorm = _199 |} -> pure _199
                                                                                                  }
                                                                            pure {inclusiveDenorm: _200}
                                                 | {- inclusiveFrac -} do (_202 : MavNumerics.InclusiveFractional0) <- do (nnNum : MavNumerics.NonNegFloat0) <- case nnf is
                                                                                                                                                                  { {| nonNegNumber = _201 |} -> pure _201
                                                                                                                                                                  }
                                                                                                                          MavNumerics._Guard ((nnNum.nnExponent) < 0)
                                                                                                                          (incMantissa : uint 23) <- pure (nnNum.nnMantissa)
                                                                                                                          (incExponent : int) <- pure (nnNum.nnExponent)
                                                                                                                          pure {incMantissa = incMantissa,
                                                                                                                                incExponent = incExponent}
                                                                          pure {inclusiveFrac: _202}
                                                 | {- inclusiveOne -} do (_205 : {}) <- do (n : MavNumerics.NonNegFloat0) <- case nnf is
                                                                                                                               { {| nonNegNumber = _203 |} -> pure _203
                                                                                                                               }
                                                                                           MavNumerics._Guard ((n.nnMantissa) == 0)
                                                                                           ($$ : {}) <- MavNumerics.Guard ((n.nnExponent) == 0)
                                                                                           pure $$
                                                                         pure {inclusiveOne: _205}
                                                 }
     pure $$
 
MavNumerics.Sub60 : Grammar int =
  do ($$ : int) <- MavNumerics.Natural 2
     MavNumerics._Guard (0 <= $$)
     MavNumerics._Guard ($$ <= 59)
     pure $$
 
MavNumerics.GeoCoord : Grammar MavNumerics.GeoCoord =
  do (degs : int) <- MavNumerics.Natural 3
     @Match {'.'}
     (mins : int) <- MavNumerics.Sub60
     (secs : int) <- MavNumerics.Sub60
     (decSecs : int) <- MavNumerics.Natural 2
     pure {degs = degs,
           mins = mins,
           secs = secs,
           decSecs = decSecs}
 
MavNumerics.Lat : Grammar MavNumerics.GeoCoord =
  MavNumerics.GeoCoord
 
MavNumerics.Long : Grammar MavNumerics.GeoCoord =
  MavNumerics.GeoCoord
 
MavNumerics._Bool : Grammar {} =
  Choose biased
    { @Match {'0'}
    | @Match {'1'}
    }
 
MavNumerics._UInt16 : Grammar {} =
  do @Match UInt8
     @Match UInt8
 
MavNumerics._HighBit : Grammar {} =
  pure {}
 
MavNumerics._Int8 : Grammar {} =
  do @Match UInt8
     MavNumerics._HighBit
     MavNumerics._HighBit
 
MavNumerics._Int24 : Grammar {} =
  do @Match UInt8
     @Match UInt8
     @Match UInt8
     MavNumerics._HighBit
     MavNumerics._HighBit
 
MavNumerics._Int32 : Grammar {} =
  do @Match UInt8
     @Match UInt8
     @Match UInt8
     @Match UInt8
     MavNumerics._HighBit
     MavNumerics._HighBit
 
MavNumerics._Digit : Grammar {} =
  @Match ('0' .. '9')
 
MavNumerics._Natural (numDigs : uint 64) : Grammar {} =
  @Many[numDigs] MavNumerics._Digit
 
MavNumerics._LowBits : Grammar {} =
  MavNumerics._HighBit
 
MavNumerics._Float : Grammar {} =
  do (dig0 : uint 8) <- Match UInt8
     (dig1 : uint 8) <- Match UInt8
     (mantissaLow : uint 16) <- MavNumerics.UInt16
     (hb : uint 8) <- MavNumerics.HighBit
     Choose biased
       { {- pos -} pure {}
       | {- neg -} pure {}
       }
     (lbs : uint 8) <- MavNumerics.LowBits
     (mant : uint 23) <- pure (((dig1 .&. lbs as uint 23) << 16) .|. (mantissaLow as uint 23))
     (exp : uint 8) <- pure (((dig0 .&. lbs) << 1) .|. ((dig1 .&. hb) >> 7))
     Choose biased
       { {- zero -} do MavNumerics._Guard (exp == 0)
                       MavNumerics._Guard (mant == 0)
       | {- denormalized -} MavNumerics._Guard (exp == 0)
       | {- infty -} do MavNumerics._Guard (exp == 0xFF)
                        MavNumerics._Guard (mant == 0)
       | {- nan -} do MavNumerics._Guard (exp == 0xFF)
                      MavNumerics._Guard (mant != 0)
       | {- number -} pure {}
       }
 
MavNumerics._NonNegFloat (f : MavNumerics.Float) : Grammar {} =
  Choose biased
    { {- nonNegZero -} case f is
                         { {| zero = _185 |} -> pure {}
                         }
    | {- nonNegDenorm -} case f is
                           { {| denormalized = _187 |} -> pure {}
                           }
    | {- nonNegInfty -} do (s : MavNumerics.Float1) <- case f is
                                                         { {| infty = _189 |} -> pure _189
                                                         }
                           case s is
                             { {| pos = _191 |} -> pure {}
                             }
    | {- nonNegNumber -} do (n : MavNumerics.Float2) <- case f is
                                                          { {| number = _193 |} -> pure _193
                                                          }
                            case n.sign is
                              { {| pos = _194 |} -> pure {}
                              }
    }
 
MavNumerics._InclusiveFractional (f : MavNumerics.Float) : Grammar {} =
  do (nnf : MavNumerics.NonNegFloat) <- MavNumerics.NonNegFloat f
     Choose biased
       { {- inclusiveZero -} case nnf is
                               { {| nonNegZero = _197 |} -> pure {}
                               }
       | {- inclusiveDenorm -} case nnf is
                                 { {| nonNegDenorm = _199 |} -> pure {}
                                 }
       | {- inclusiveFrac -} do (nnNum : MavNumerics.NonNegFloat0) <- case nnf is
                                                                        { {| nonNegNumber = _201 |} -> pure _201
                                                                        }
                                MavNumerics._Guard ((nnNum.nnExponent) < 0)
       | {- inclusiveOne -} do (n : MavNumerics.NonNegFloat0) <- case nnf is
                                                                   { {| nonNegNumber = _203 |} -> pure _203
                                                                   }
                               MavNumerics._Guard ((n.nnMantissa) == 0)
                               MavNumerics._Guard ((n.nnExponent) == 0)
       }
 
MavNumerics._Sub60 : Grammar {} =
  do ($$ : int) <- MavNumerics.Natural 2
     MavNumerics._Guard (0 <= $$)
     MavNumerics._Guard ($$ <= 59)
 
MavNumerics._GeoCoord : Grammar {} =
  do MavNumerics._Natural 3
     @Match {'.'}
     MavNumerics._Sub60
     MavNumerics._Sub60
     MavNumerics._Natural 2
 
MavNumerics._Lat : Grammar {} =
  MavNumerics._GeoCoord
 
MavNumerics._Long : Grammar {} =
  MavNumerics._GeoCoord
module MavEnums
 
--- Imports:
import MavNumerics
 
--- Type defs:
type MavEnums.Position ?a0 ?a1 ?a2 = { latitude: ?a0
                                     ; longitude: ?a1
                                     ; altitude: ?a2
                                     }
 
type MavEnums.MavCmd0 ?a0 ?a1 ?a2 ?a3 ?a4 = { hold: MavNumerics.NonNegFloat
                                            ; acceptRadius: MavNumerics.NonNegFloat
                                            ; passRadius: ?a0
                                            ; yaw: ?a1
                                            ; position: MavEnums.Position ?a2 ?a3 ?a4
                                            }
 
type MavEnums.MavCmd1 ?a0 ?a1 ?a2 ?a3 ?a4 = { radius: ?a0
                                            ; yaw: ?a1
                                            ; position: MavEnums.Position ?a2 ?a3 ?a4
                                            }
 
type MavEnums.MavCmd2 ?a0 ?a1 ?a2 ?a3 ?a4 = { turns: MavNumerics.NonNegFloat
                                            ; headingRequired: MavNumerics.InclusiveFractional
                                            ; radius: ?a0
                                            ; xtrackLoc: ?a1
                                            ; position: MavEnums.Position ?a2 ?a3 ?a4
                                            }
 
type MavEnums.MavCmd3 ?a0 ?a1 ?a2 ?a3 ?a4 = { time: MavNumerics.NonNegFloat
                                            ; headingRequired: MavNumerics.InclusiveFractional
                                            ; radius: ?a0
                                            ; xtrackLocation: ?a1
                                            ; position: MavEnums.Position ?a2 ?a3 ?a4
                                            }
 
type MavEnums.PrecisionLandMode = Choose { precisionLandModeRequired: {}
                                         ; precisionLandModeOpportunistic: {}
                                         ; precisionLandModeDisabled: {}
                                         }
 
type MavEnums.MavCmd4 ?a0 ?a1 ?a2 ?a3 = { abortAlt: MavNumerics.Float
                                        ; landMode: MavEnums.PrecisionLandMode
                                        ; yawAngle: ?a0
                                        ; position: MavEnums.Position ?a1 ?a2 ?a3
                                        }
 
type MavEnums.MavCmd5 ?a0 ?a1 ?a2 ?a3 = { pitch: MavNumerics.Float
                                        ; yaw: ?a0
                                        ; position: MavEnums.Position ?a1 ?a2 ?a3
                                        }
 
type MavEnums.MavFrame = Choose { mavFrameBodyFrd: {}
                                ; mavFrameBodyNed: {}
                                ; mavFrameBodyOffsetNed: {}
                                ; mavFrameGlobal: {}
                                ; mavFrameGlobalInt: {}
                                ; mavFrameGlobalRelativeAlt: {}
                                ; mavFrameGlobalRelativeAltInt: {}
                                ; mavFrameGlobalTerrainAlt: {}
                                ; mavFrameGlobalTerrainAltInt: {}
                                ; mavFrameLocalEnu: {}
                                ; mavFrameLocalFlu: {}
                                ; mavFrameLocalFrd: {}
                                ; mavFrameLocalNed: {}
                                ; mavFrameLocalOffsetNed: {}
                                ; mavFrameMission: {}
                                ; mavFrameReserved13: {}
                                ; mavFrameReserved14: {}
                                }
 
type MavEnums.CmdParams = { param1: MavNumerics.Float
                          ; param2: MavNumerics.Float
                          ; param3: MavNumerics.Float
                          ; param4: MavNumerics.Float
                          ; x: int
                          ; y: int
                          ; z: MavNumerics.Float
                          }
 
type MavEnums.MavCmd ?a0 ?a1 ?a2 ?a3 ?a4 ?a5 = Choose { mavCmdSome: ?a0
                                                      ; mavCmdNavWaypoint: MavEnums.MavCmd0 ?a1 ?a2 ?a3 ?a4 ?a5
                                                      ; mavCmdNavTakeoff: MavEnums.MavCmd5 ?a2 ?a3 ?a4 ?a5
                                                      ; mavCmdNavReturnToLaunch: {}
                                                      ; mavCmdNavLoiterUnlim: MavEnums.MavCmd1 ?a1 ?a2 ?a3 ?a4 ?a5
                                                      ; mavCmdNavLoiterTurns: MavEnums.MavCmd2 ?a1 ?a2 ?a3 ?a4 ?a5
                                                      ; mavCmdNavLoiterTime: MavEnums.MavCmd3 ?a1 ?a2 ?a3 ?a4 ?a5
                                                      ; mavCmdNavLand: MavEnums.MavCmd4 ?a2 ?a3 ?a4 ?a5
                                                      }
 
type MavEnums.MavMissionType = Choose { mavMissionTypeAll: {}
                                      ; mavMissionTypeFence: {}
                                      ; mavMissionTypeMission: {}
                                      ; mavMissionTypeRally: {}
                                      }
 
type MavEnums.MavMissionResult = Choose { mavMissionAccepted: {}
                                        ; mavMissionDenied: {}
                                        ; mavMissionError: {}
                                        ; mavMissionInvalid: {}
                                        ; mavMissionInvalidParam1: {}
                                        ; mavMissionInvalidParam2: {}
                                        ; mavMissionInvalidParam3: {}
                                        ; mavMissionInvalidParam4: {}
                                        ; mavMissionInvalidParam5X: {}
                                        ; mavMissionInvalidParam6Y: {}
                                        ; mavMissionInvalidParam7: {}
                                        ; mavMissionInvalidSequence: {}
                                        ; mavMissionNoSpace: {}
                                        ; mavMissionOperationCancelled: {}
                                        ; mavMissionUnsupported: {}
                                        ; mavMissionUnsupportedFrame: {}
                                        }
 
--- Rules:
 
MavEnums.MavFrame : Grammar MavEnums.MavFrame =
  Choose biased
    { {- mavFrameGlobal -} do (_206 : {}) <- @Match {0}
                              pure {mavFrameGlobal: _206}
    | {- mavFrameLocalNed -} do (_207 : {}) <- @Match {1}
                                pure {mavFrameLocalNed: _207}
    | {- mavFrameMission -} do (_208 : {}) <- @Match {2}
                               pure {mavFrameMission: _208}
    | {- mavFrameGlobalRelativeAlt -} do (_209 : {}) <- @Match {3}
                                         pure {mavFrameGlobalRelativeAlt: _209}
    | {- mavFrameLocalEnu -} do (_210 : {}) <- @Match {4}
                                pure {mavFrameLocalEnu: _210}
    | {- mavFrameGlobalInt -} do (_211 : {}) <- @Match {5}
                                 pure {mavFrameGlobalInt: _211}
    | {- mavFrameGlobalRelativeAltInt -} do (_212 : {}) <- @Match {6}
                                            pure {mavFrameGlobalRelativeAltInt: _212}
    | {- mavFrameLocalOffsetNed -} do (_213 : {}) <- @Match {7}
                                      pure {mavFrameLocalOffsetNed: _213}
    | {- mavFrameBodyNed -} do (_214 : {}) <- @Match {8}
                               pure {mavFrameBodyNed: _214}
    | {- mavFrameBodyOffsetNed -} do (_215 : {}) <- @Match {9}
                                     pure {mavFrameBodyOffsetNed: _215}
    | {- mavFrameGlobalTerrainAlt -} do (_216 : {}) <- @Match {10}
                                        pure {mavFrameGlobalTerrainAlt: _216}
    | {- mavFrameGlobalTerrainAltInt -} do (_217 : {}) <- @Match {11}
                                           pure {mavFrameGlobalTerrainAltInt: _217}
    | {- mavFrameBodyFrd -} do (_218 : {}) <- @Match {12}
                               pure {mavFrameBodyFrd: _218}
    | {- mavFrameReserved13 -} do (_219 : {}) <- @Match {13}
                                  pure {mavFrameReserved13: _219}
    | {- mavFrameReserved14 -} do (_220 : {}) <- @Match {14}
                                  pure {mavFrameReserved14: _220}
    | {- mavFrameReserved14 -} do (_221 : {}) <- @Match {15}
                                  pure {mavFrameReserved14: _221}
    | {- mavFrameReserved14 -} do (_222 : {}) <- @Match {16}
                                  pure {mavFrameReserved14: _222}
    | {- mavFrameReserved14 -} do (_223 : {}) <- @Match {17}
                                  pure {mavFrameReserved14: _223}
    | {- mavFrameReserved14 -} do (_224 : {}) <- @Match {18}
                                  pure {mavFrameReserved14: _224}
    | {- mavFrameReserved14 -} do (_225 : {}) <- @Match {19}
                                  pure {mavFrameReserved14: _225}
    | {- mavFrameLocalFrd -} do (_226 : {}) <- @Match {20}
                                pure {mavFrameLocalFrd: _226}
    | {- mavFrameLocalFlu -} do (_227 : {}) <- @Match {21}
                                pure {mavFrameLocalFlu: _227}
    }
 
MavEnums.CmdParams : Grammar MavEnums.CmdParams =
  do (param1 : MavNumerics.Float) <- MavNumerics.Float
     (param2 : MavNumerics.Float) <- MavNumerics.Float
     (param3 : MavNumerics.Float) <- MavNumerics.Float
     (param4 : MavNumerics.Float) <- MavNumerics.Float
     (x : int) <- MavNumerics.Int32
     (y : int) <- MavNumerics.Int32
     (z : MavNumerics.Float) <- MavNumerics.Float
     pure {param1 = param1,
           param2 = param2,
           param3 = param3,
           param4 = param4,
           x = x,
           y = y,
           z = z}
 
MavEnums.Position ?a0 ?a1 ?a2 ?a3 (HasStruct ?a0 x ?a1) (HasStruct ?a0 y ?a2) (HasStruct ?a0 z ?a3) (params : ?a0) : Grammar (MavEnums.Position ?a1 ?a2 ?a3) =
  do (latitude : ?a1) <- pure (params.x)
     (longitude : ?a2) <- pure (params.y)
     (altitude : ?a3) <- pure (params.z)
     pure {latitude = latitude,
           longitude = longitude,
           altitude = altitude}
 
MavEnums.PrecisionLandMode (f : MavNumerics.Float) : Grammar MavEnums.PrecisionLandMode =
  Choose biased
    { {- precisionLandModeDisabled -} do (_229 : {}) <- case f is
                                                          { {| zero = _228 |} -> pure _228
                                                          }
                                         pure {precisionLandModeDisabled: _229}
    | {- precisionLandModeOpportunistic -} do (_233 : {}) <- do (n : MavNumerics.Float2) <- case f is
                                                                                              { {| number = _230 |} -> pure _230
                                                                                              }
                                                                case n.sign is
                                                                  { {| pos = _231 |} -> pure {}
                                                                  }
                                                                MavNumerics._Guard ((n.exponent) == 0)
                                                                ($$ : {}) <- MavNumerics.Guard ((n.mantissa) == 1)
                                                                pure $$
                                              pure {precisionLandModeOpportunistic: _233}
    | {- precisionLandModeRequired -} do (_237 : {}) <- do (n : MavNumerics.Float2) <- case f is
                                                                                         { {| number = _234 |} -> pure _234
                                                                                         }
                                                           case n.sign is
                                                             { {| pos = _235 |} -> pure {}
                                                             }
                                                           MavNumerics._Guard ((n.exponent) == 0)
                                                           ($$ : {}) <- MavNumerics.Guard ((n.mantissa) == 2)
                                                           pure $$
                                         pure {precisionLandModeRequired: _237}
    }
 
MavEnums.MavCmd ?a0 ?a1 ?a2 ?a3 ?a4 ?a5 (HasStruct ?a0 param2 MavNumerics.Float) (HasStruct ?a0 param3 ?a1) (HasStruct ?a0 param1 MavNumerics.Float) (HasStruct ?a0 param4 ?a2) (HasStruct ?a0 x ?a3) (HasStruct ?a0 y ?a4) (HasStruct ?a0 z ?a5) (params : ?a0) : Grammar (MavEnums.MavCmd ?a0 ?a1 ?a2 ?a3 ?a4 ?a5) =
  do (cmd : uint 16) <- MavNumerics.UInt16
     ($$ : MavEnums.MavCmd ?a0 ?a1 ?a2 ?a3 ?a4 ?a5) <- Choose biased
                                                         { {- mavCmdNavWaypoint -} do (_239 : MavEnums.MavCmd0 ?a1 ?a2 ?a3 ?a4 ?a5) <- do MavNumerics._Guard (cmd == 16)
                                                                                                                                          (hold : MavNumerics.NonNegFloat) <- MavNumerics.NonNegFloat (params.param1)
                                                                                                                                          (acceptRadius : MavNumerics.NonNegFloat) <- MavNumerics.NonNegFloat (params.param2)
                                                                                                                                          (passRadius : ?a1) <- pure (params.param3)
                                                                                                                                          (yaw : ?a2) <- pure (params.param4)
                                                                                                                                          (position : MavEnums.Position ?a3 ?a4 ?a5) <- MavEnums.Position ?a0 ?a3 ?a4 ?a5 params
                                                                                                                                          pure {hold = hold,
                                                                                                                                                acceptRadius = acceptRadius,
                                                                                                                                                passRadius = passRadius,
                                                                                                                                                yaw = yaw,
                                                                                                                                                position = position}
                                                                                      pure {mavCmdNavWaypoint: _239}
                                                         | {- mavCmdNavLoiterUnlim -} do (_240 : MavEnums.MavCmd1 ?a1 ?a2 ?a3 ?a4 ?a5) <- do MavNumerics._Guard (cmd == 17)
                                                                                                                                             (radius : ?a1) <- pure (params.param3)
                                                                                                                                             (yaw : ?a2) <- pure (params.param4)
                                                                                                                                             (position : MavEnums.Position ?a3 ?a4 ?a5) <- MavEnums.Position ?a0 ?a3 ?a4 ?a5 params
                                                                                                                                             pure {radius = radius,
                                                                                                                                                   yaw = yaw,
                                                                                                                                                   position = position}
                                                                                         pure {mavCmdNavLoiterUnlim: _240}
                                                         | {- mavCmdNavLoiterTurns -} do (_241 : MavEnums.MavCmd2 ?a1 ?a2 ?a3 ?a4 ?a5) <- do MavNumerics._Guard (cmd == 18)
                                                                                                                                             (turns : MavNumerics.NonNegFloat) <- MavNumerics.NonNegFloat (params.param1)
                                                                                                                                             (headingRequired : MavNumerics.InclusiveFractional) <- MavNumerics.InclusiveFractional (params.param2)
                                                                                                                                             (radius : ?a1) <- pure (params.param3)
                                                                                                                                             (xtrackLoc : ?a2) <- pure (params.param4)
                                                                                                                                             (position : MavEnums.Position ?a3 ?a4 ?a5) <- MavEnums.Position ?a0 ?a3 ?a4 ?a5 params
                                                                                                                                             pure {turns = turns,
                                                                                                                                                   headingRequired = headingRequired,
                                                                                                                                                   radius = radius,
                                                                                                                                                   xtrackLoc = xtrackLoc,
                                                                                                                                                   position = position}
                                                                                         pure {mavCmdNavLoiterTurns: _241}
                                                         | {- mavCmdNavLoiterTime -} do (_242 : MavEnums.MavCmd3 ?a1 ?a2 ?a3 ?a4 ?a5) <- do MavNumerics._Guard (cmd == 19)
                                                                                                                                            (time : MavNumerics.NonNegFloat) <- MavNumerics.NonNegFloat (params.param1)
                                                                                                                                            (headingRequired : MavNumerics.InclusiveFractional) <- MavNumerics.InclusiveFractional (params.param2)
                                                                                                                                            (radius : ?a1) <- pure (params.param3)
                                                                                                                                            (xtrackLocation : ?a2) <- pure (params.param4)
                                                                                                                                            (position : MavEnums.Position ?a3 ?a4 ?a5) <- MavEnums.Position ?a0 ?a3 ?a4 ?a5 params
                                                                                                                                            pure {time = time,
                                                                                                                                                  headingRequired = headingRequired,
                                                                                                                                                  radius = radius,
                                                                                                                                                  xtrackLocation = xtrackLocation,
                                                                                                                                                  position = position}
                                                                                        pure {mavCmdNavLoiterTime: _242}
                                                         | {- mavCmdNavReturnToLaunch -} do (_243 : {}) <- MavNumerics.Guard (cmd == 20)
                                                                                            pure {mavCmdNavReturnToLaunch: _243}
                                                         | {- mavCmdNavLand -} do (_244 : MavEnums.MavCmd4 ?a2 ?a3 ?a4 ?a5) <- do MavNumerics._Guard (cmd == 21)
                                                                                                                                  (abortAlt : MavNumerics.Float) <- pure (params.param1)
                                                                                                                                  (landMode : MavEnums.PrecisionLandMode) <- MavEnums.PrecisionLandMode (params.param2)
                                                                                                                                  (yawAngle : ?a2) <- pure (params.param4)
                                                                                                                                  (position : MavEnums.Position ?a3 ?a4 ?a5) <- MavEnums.Position ?a0 ?a3 ?a4 ?a5 params
                                                                                                                                  pure {abortAlt = abortAlt,
                                                                                                                                        landMode = landMode,
                                                                                                                                        yawAngle = yawAngle,
                                                                                                                                        position = position}
                                                                                  pure {mavCmdNavLand: _244}
                                                         | {- mavCmdNavTakeoff -} do (_245 : MavEnums.MavCmd5 ?a2 ?a3 ?a4 ?a5) <- do MavNumerics._Guard (cmd == 22)
                                                                                                                                     (pitch : MavNumerics.Float) <- pure (params.param1)
                                                                                                                                     (yaw : ?a2) <- pure (params.param4)
                                                                                                                                     (position : MavEnums.Position ?a3 ?a4 ?a5) <- MavEnums.Position ?a0 ?a3 ?a4 ?a5 params
                                                                                                                                     pure {pitch = pitch,
                                                                                                                                           yaw = yaw,
                                                                                                                                           position = position}
                                                                                     pure {mavCmdNavTakeoff: _245}
                                                         | {- mavCmdSome -} do (_246 : ?a0) <- pure params
                                                                               pure {mavCmdSome: _246}
                                                         }
     pure $$
 
MavEnums.MavMissionType : Grammar MavEnums.MavMissionType =
  Choose biased
    { {- mavMissionTypeMission -} do (_247 : {}) <- @Match {0}
                                     pure {mavMissionTypeMission: _247}
    | {- mavMissionTypeFence -} do (_248 : {}) <- @Match {1}
                                   pure {mavMissionTypeFence: _248}
    | {- mavMissionTypeRally -} do (_249 : {}) <- @Match {2}
                                   pure {mavMissionTypeRally: _249}
    | {- mavMissionTypeAll -} do (_250 : {}) <- @Match {255}
                                 pure {mavMissionTypeAll: _250}
    }
 
MavEnums.MavMissionResult : Grammar MavEnums.MavMissionResult =
  Choose biased
    { {- mavMissionAccepted -} do (_251 : {}) <- @Match {0}
                                  pure {mavMissionAccepted: _251}
    | {- mavMissionError -} do (_252 : {}) <- @Match {1}
                               pure {mavMissionError: _252}
    | {- mavMissionUnsupportedFrame -} do (_253 : {}) <- @Match {2}
                                          pure {mavMissionUnsupportedFrame: _253}
    | {- mavMissionUnsupported -} do (_254 : {}) <- @Match {3}
                                     pure {mavMissionUnsupported: _254}
    | {- mavMissionNoSpace -} do (_255 : {}) <- @Match {4}
                                 pure {mavMissionNoSpace: _255}
    | {- mavMissionInvalid -} do (_256 : {}) <- @Match {5}
                                 pure {mavMissionInvalid: _256}
    | {- mavMissionInvalidParam1 -} do (_257 : {}) <- @Match {6}
                                       pure {mavMissionInvalidParam1: _257}
    | {- mavMissionInvalidParam2 -} do (_258 : {}) <- @Match {7}
                                       pure {mavMissionInvalidParam2: _258}
    | {- mavMissionInvalidParam3 -} do (_259 : {}) <- @Match {8}
                                       pure {mavMissionInvalidParam3: _259}
    | {- mavMissionInvalidParam4 -} do (_260 : {}) <- @Match {9}
                                       pure {mavMissionInvalidParam4: _260}
    | {- mavMissionInvalidParam5X -} do (_261 : {}) <- @Match {10}
                                        pure {mavMissionInvalidParam5X: _261}
    | {- mavMissionInvalidParam6Y -} do (_262 : {}) <- @Match {11}
                                        pure {mavMissionInvalidParam6Y: _262}
    | {- mavMissionInvalidParam7 -} do (_263 : {}) <- @Match {12}
                                       pure {mavMissionInvalidParam7: _263}
    | {- mavMissionInvalidSequence -} do (_264 : {}) <- @Match {13}
                                         pure {mavMissionInvalidSequence: _264}
    | {- mavMissionDenied -} do (_265 : {}) <- @Match {14}
                                pure {mavMissionDenied: _265}
    | {- mavMissionOperationCancelled -} do (_266 : {}) <- @Match {15}
                                            pure {mavMissionOperationCancelled: _266}
    }
 
MavEnums._MavFrame : Grammar {} =
  Choose biased
    { {- mavFrameGlobal -} @Match {0}
    | {- mavFrameLocalNed -} @Match {1}
    | {- mavFrameMission -} @Match {2}
    | {- mavFrameGlobalRelativeAlt -} @Match {3}
    | {- mavFrameLocalEnu -} @Match {4}
    | {- mavFrameGlobalInt -} @Match {5}
    | {- mavFrameGlobalRelativeAltInt -} @Match {6}
    | {- mavFrameLocalOffsetNed -} @Match {7}
    | {- mavFrameBodyNed -} @Match {8}
    | {- mavFrameBodyOffsetNed -} @Match {9}
    | {- mavFrameGlobalTerrainAlt -} @Match {10}
    | {- mavFrameGlobalTerrainAltInt -} @Match {11}
    | {- mavFrameBodyFrd -} @Match {12}
    | {- mavFrameReserved13 -} @Match {13}
    | {- mavFrameReserved14 -} @Match {14}
    | {- mavFrameReserved14 -} @Match {15}
    | {- mavFrameReserved14 -} @Match {16}
    | {- mavFrameReserved14 -} @Match {17}
    | {- mavFrameReserved14 -} @Match {18}
    | {- mavFrameReserved14 -} @Match {19}
    | {- mavFrameLocalFrd -} @Match {20}
    | {- mavFrameLocalFlu -} @Match {21}
    }
 
MavEnums._CmdParams : Grammar {} =
  do MavNumerics._Float
     MavNumerics._Float
     MavNumerics._Float
     MavNumerics._Float
     MavNumerics._Int32
     MavNumerics._Int32
     MavNumerics._Float
 
MavEnums._Position ?a0 ?a1 ?a2 ?a3 (HasStruct ?a0 x ?a1) (HasStruct ?a0 y ?a2) (HasStruct ?a0 z ?a3) : Grammar {} =
  pure {}
 
MavEnums._PrecisionLandMode (f : MavNumerics.Float) : Grammar {} =
  Choose biased
    { {- precisionLandModeDisabled -} case f is
                                        { {| zero = _228 |} -> pure {}
                                        }
    | {- precisionLandModeOpportunistic -} do (n : MavNumerics.Float2) <- case f is
                                                                            { {| number = _230 |} -> pure _230
                                                                            }
                                              case n.sign is
                                                { {| pos = _231 |} -> pure {}
                                                }
                                              MavNumerics._Guard ((n.exponent) == 0)
                                              MavNumerics._Guard ((n.mantissa) == 1)
    | {- precisionLandModeRequired -} do (n : MavNumerics.Float2) <- case f is
                                                                       { {| number = _234 |} -> pure _234
                                                                       }
                                         case n.sign is
                                           { {| pos = _235 |} -> pure {}
                                           }
                                         MavNumerics._Guard ((n.exponent) == 0)
                                         MavNumerics._Guard ((n.mantissa) == 2)
    }
 
MavEnums._MavCmd ?a0 ?a1 ?a2 ?a3 ?a4 ?a5 (HasStruct ?a0 param2 MavNumerics.Float) (HasStruct ?a0 param3 ?a1) (HasStruct ?a0 param1 MavNumerics.Float) (HasStruct ?a0 param4 ?a2) (HasStruct ?a0 x ?a3) (HasStruct ?a0 y ?a4) (HasStruct ?a0 z ?a5) (params : ?a0) : Grammar {} =
  do (cmd : uint 16) <- MavNumerics.UInt16
     Choose biased
       { {- mavCmdNavWaypoint -} do MavNumerics._Guard (cmd == 16)
                                    MavNumerics._NonNegFloat (params.param1)
                                    MavNumerics._NonNegFloat (params.param2)
                                    MavEnums._Position ?a0 ?a3 ?a4 ?a5
       | {- mavCmdNavLoiterUnlim -} do MavNumerics._Guard (cmd == 17)
                                       MavEnums._Position ?a0 ?a3 ?a4 ?a5
       | {- mavCmdNavLoiterTurns -} do MavNumerics._Guard (cmd == 18)
                                       MavNumerics._NonNegFloat (params.param1)
                                       MavNumerics._InclusiveFractional (params.param2)
                                       MavEnums._Position ?a0 ?a3 ?a4 ?a5
       | {- mavCmdNavLoiterTime -} do MavNumerics._Guard (cmd == 19)
                                      MavNumerics._NonNegFloat (params.param1)
                                      MavNumerics._InclusiveFractional (params.param2)
                                      MavEnums._Position ?a0 ?a3 ?a4 ?a5
       | {- mavCmdNavReturnToLaunch -} MavNumerics._Guard (cmd == 20)
       | {- mavCmdNavLand -} do MavNumerics._Guard (cmd == 21)
                                MavEnums._PrecisionLandMode (params.param2)
                                MavEnums._Position ?a0 ?a3 ?a4 ?a5
       | {- mavCmdNavTakeoff -} do MavNumerics._Guard (cmd == 22)
                                   MavEnums._Position ?a0 ?a3 ?a4 ?a5
       | {- mavCmdSome -} pure {}
       }
 
MavEnums._MavMissionType : Grammar {} =
  Choose biased
    { {- mavMissionTypeMission -} @Match {0}
    | {- mavMissionTypeFence -} @Match {1}
    | {- mavMissionTypeRally -} @Match {2}
    | {- mavMissionTypeAll -} @Match {255}
    }
 
MavEnums._MavMissionResult : Grammar {} =
  Choose biased
    { {- mavMissionAccepted -} @Match {0}
    | {- mavMissionError -} @Match {1}
    | {- mavMissionUnsupportedFrame -} @Match {2}
    | {- mavMissionUnsupported -} @Match {3}
    | {- mavMissionNoSpace -} @Match {4}
    | {- mavMissionInvalid -} @Match {5}
    | {- mavMissionInvalidParam1 -} @Match {6}
    | {- mavMissionInvalidParam2 -} @Match {7}
    | {- mavMissionInvalidParam3 -} @Match {8}
    | {- mavMissionInvalidParam4 -} @Match {9}
    | {- mavMissionInvalidParam5X -} @Match {10}
    | {- mavMissionInvalidParam6Y -} @Match {11}
    | {- mavMissionInvalidParam7 -} @Match {12}
    | {- mavMissionInvalidSequence -} @Match {13}
    | {- mavMissionDenied -} @Match {14}
    | {- mavMissionOperationCancelled -} @Match {15}
    }
module MissionItemInt
 
--- Imports:
import MavEnums
import MavNumerics
 
--- Type defs:
type MissionItemInt.MissionItemInt = { seq: uint 16
                                     ; command: MavEnums.MavCmd MavEnums.CmdParams MavNumerics.Float MavNumerics.Float int int MavNumerics.Float
                                     ; autocontinue: uint 16
                                     ; target_system: uint 8
                                     ; target_component: uint 8
                                     ; frame: MavEnums.MavFrame
                                     ; current: bool
                                     ; mission_type: MavEnums.MavMissionType
                                     }
 
--- Rules:
 
MissionItemInt.MissionItemInt : Grammar MissionItemInt.MissionItemInt =
  do (params : MavEnums.CmdParams) <- MavEnums.CmdParams
     (seq : uint 16) <- MavNumerics.UInt16
     (command : MavEnums.MavCmd MavEnums.CmdParams MavNumerics.Float MavNumerics.Float int int MavNumerics.Float) <- MavEnums.MavCmd MavEnums.CmdParams MavNumerics.Float MavNumerics.Float int int MavNumerics.Float params
     (autocontinue : uint 16) <- MavNumerics.UInt16
     (target_system : uint 8) <- Match UInt8
     (target_component : uint 8) <- Match UInt8
     (frame : MavEnums.MavFrame) <- MavEnums.MavFrame
     (current : bool) <- MavNumerics.Bool
     (mission_type : MavEnums.MavMissionType) <- MavEnums.MavMissionType
     pure {seq = seq,
           command = command,
           autocontinue = autocontinue,
           target_system = target_system,
           target_component = target_component,
           frame = frame,
           current = current,
           mission_type = mission_type}
 
MissionItemInt._MissionItemInt : Grammar {} =
  do (params : MavEnums.CmdParams) <- MavEnums.CmdParams
     MavNumerics._UInt16
     MavEnums._MavCmd MavEnums.CmdParams MavNumerics.Float MavNumerics.Float int int MavNumerics.Float params
     MavNumerics._UInt16
     @Match UInt8
     @Match UInt8
     MavEnums._MavFrame
     MavNumerics._Bool
     MavEnums._MavMissionType
module MissionCount
 
--- Imports:
import MavEnums
import MavNumerics
 
--- Type defs:
type MissionCount.MissionCount = { target_system: uint 8
                                 ; target_component: uint 8
                                 ; count: uint 16
                                 ; mission_type: MavEnums.MavMissionType
                                 }
 
--- Rules:
 
MissionCount.MissionCount : Grammar MissionCount.MissionCount =
  do (target_system : uint 8) <- Match UInt8
     (target_component : uint 8) <- Match UInt8
     (count : uint 16) <- MavNumerics.UInt16
     (mission_type : MavEnums.MavMissionType) <- MavEnums.MavMissionType
     pure {target_system = target_system,
           target_component = target_component,
           count = count,
           mission_type = mission_type}
 
MissionCount._MissionCount : Grammar {} =
  do @Match UInt8
     @Match UInt8
     MavNumerics._UInt16
     MavEnums._MavMissionType
module MissionAck
 
--- Imports:
import MavEnums
import MavNumerics
 
--- Type defs:
type MissionAck.MissionAck = { target_system: uint 8
                             ; target_component: uint 8
                             ; result: MavEnums.MavMissionResult
                             ; mission_type: MavEnums.MavMissionType
                             }
 
--- Rules:
 
MissionAck.MissionAck : Grammar MissionAck.MissionAck =
  do (target_system : uint 8) <- Match UInt8
     (target_component : uint 8) <- Match UInt8
     (result : MavEnums.MavMissionResult) <- MavEnums.MavMissionResult
     (mission_type : MavEnums.MavMissionType) <- MavEnums.MavMissionType
     pure {target_system = target_system,
           target_component = target_component,
           result = result,
           mission_type = mission_type}
 
MissionAck._MissionAck : Grammar {} =
  do @Match UInt8
     @Match UInt8
     MavEnums._MavMissionResult
     MavEnums._MavMissionType
module Main
 
--- Imports:
import MissionItemInt
import MissionCount
import MissionAck
 
--- Type defs:
type Main.Main0 = Choose { ack: MissionAck.MissionAck
                         ; count: MissionCount.MissionCount
                         ; itemInt: MissionItemInt.MissionItemInt
                         }
 
--- Rules:
 
Main.Main : Grammar [Main.Main0] =
  Many[] do ($$ : Main.Main0) <- Choose biased
                                   { {- ack -} do (_267 : MissionAck.MissionAck) <- MissionAck.MissionAck
                                                  pure {ack: _267}
                                   | {- count -} do (_268 : MissionCount.MissionCount) <- MissionCount.MissionCount
                                                    pure {count: _268}
                                   | {- itemInt -} do (_269 : MissionItemInt.MissionItemInt) <- MissionItemInt.MissionItemInt
                                                      pure {itemInt: _269}
                                   }
            @Match {'\n'}
            pure $$
 
Main._Main : Grammar {} =
  @Many[] do Choose biased
               { {- ack -} MissionAck._MissionAck
               | {- count -} MissionCount._MissionCount
               | {- itemInt -} MissionItemInt._MissionItemInt
               }
             @Match {'\n'}
