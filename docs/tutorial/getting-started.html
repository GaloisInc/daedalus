<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; Daedalus 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Breaking Down the PPM Specification" href="ppm-breakdown.html" />
    <link rel="prev" title="Implicit Parameters" href="../implicit-parameters.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Daedalus
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Using the Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../using-daedalus.html">Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using-daedalus.html#check-a-specification">Check a Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using-daedalus.html#run-the-interpreter">Run the Interpreter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using-daedalus.html#compile-to-haskell">Compile to Haskell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using-daedalus.html#compile-to-c">Compile to C++</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Daedalus Language</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../declarations.html">Declarations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parsers.html">Parsers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../parsers.html#primitive-parsers">Primitive Parsers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parsers.html#sequencing-parsers">Sequencing Parsers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../parsers.html#basic-sequencing">Basic Sequencing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parsers.html#explicit-result">Explicit Result</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parsers.html#local-variables">Local Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parsers.html#structure-sequence">Structure Sequence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parsers.html#syntactic-sugar">Syntactic Sugar</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../parsers.html#parsing-alternatives">Parsing Alternatives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../parsers.html#biased-choice">Biased Choice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parsers.html#unbiased-choice">Unbiased Choice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parsers.html#alternative-syntax">Alternative Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parsers.html#tagged-unions">Tagged Unions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../parsers.html#repetition">Repetition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../control-structures.html">Control Structures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../control-structures.html#if-then-else">If-then-else</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control-structures.html#guards">Guards</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../control-structures.html#boolean-guards">Boolean Guards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../control-structures.html#guards-on-maybe">Guards on <code class="docutils literal notranslate"><span class="pre">maybe</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../control-structures.html#guards-on-tagged-unions">Guards on Tagged Unions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../control-structures.html#case">Case</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control-structures.html#for-loops"><code class="docutils literal notranslate"><span class="pre">for</span></code> loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control-structures.html#traversing-with-map">Traversing with <code class="docutils literal notranslate"><span class="pre">map</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../control-structures.html#many-loops"><code class="docutils literal notranslate"><span class="pre">many</span></code> loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control-structures.html#commit">Commit</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../types.html">Type Annotations and Coercions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../types.html#annotating-an-expression">Annotating an Expression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../types.html#annotating-the-result-of-a-declaration">Annotating the Result of a Declaration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../types.html#annotating-a-parameter">Annotating a Parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../types.html#naming-unknown-types">Naming Unknown Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../types.html#coercions">Coercions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../semantic-values.html">Semantic Values</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../semantic-values.html#booleans">Booleans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../semantic-values.html#numeric-types">Numeric Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../semantic-values.html#numeric-literals">Numeric Literals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../semantic-values.html#comparisons">Comparisons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../semantic-values.html#basic-arithmetic">Basic Arithmetic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../semantic-values.html#bitwise-operations">Bitwise Operations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../semantic-values.html#maybe-type"><code class="docutils literal notranslate"><span class="pre">maybe</span></code> type</a></li>
<li class="toctree-l2"><a class="reference internal" href="../semantic-values.html#arrays">Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../semantic-values.html#array-builders">Array Builders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../semantic-values.html#association-maps">Association Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../semantic-values.html#streams">Streams</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../streams.html">Stream Manipulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../character-classes.html">Character Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external.html">External Declarations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bitdata.html">Bitdata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lifting.html">Implicit Lifting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implicit-parameters.html">Implicit Parameters</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Daedalus Tutorial</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#daedalus-syntax-highlighting-editing-modes">DaeDaLus Syntax Highlighting / Editing Modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#your-first-daedalus-specification">Your First DaeDaLus Specification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-portable-pixmap-format">The Portable PixMap Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#an-example-ppm-image">An Example PPM Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#a-daedalus-ppm-specification">A DaeDaLus PPM Specification</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ppm-breakdown.html">Breaking Down the PPM Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="ppm-breakdown-decl.html">Breaking down PPM: Declarations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-decl.html#deducing-types-from-names">Deducing Types From Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-decl.html#parameterized-declarations">Parameterized Declarations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ppm-breakdown-parse.html">Breaking down PPM: Primitive Parsing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-parse.html#uint8"><code class="docutils literal notranslate"><span class="pre">UInt8</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-parse.html#match1"><code class="docutils literal notranslate"><span class="pre">Match1</span> <span class="pre">...</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-parse.html#match"><code class="docutils literal notranslate"><span class="pre">Match</span> <span class="pre">...</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-parse.html#end"><code class="docutils literal notranslate"><span class="pre">END</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-parse.html#id1"><code class="docutils literal notranslate"><span class="pre">^</span> <span class="pre">...</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-parse.html#fail"><code class="docutils literal notranslate"><span class="pre">Fail</span> <span class="pre">...</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ppm-breakdown-comb.html">Breaking down PPM: Parser Combinators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-comb.html#standard-sequencing">Standard Sequencing</a></li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-comb.html#array-sequencing">Array Sequencing</a></li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-comb.html#structure-sequencing">Structure Sequencing</a></li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-comb.html#de-sugaring-nonstandard-structure-sequences">De-Sugaring Nonstandard Structure Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-comb.html#parsing-alternates">Parsing Alternates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-comb.html#biased-choice-parsing">Biased Choice Parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-comb.html#unbiased-choice-parsing">Unbiased Choice Parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-comb.html#tagged-sum-types">Tagged Sum Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-comb.html#repeating-parsers">Repeating Parsers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ppm-breakdown-expr.html">Breaking down PPM: Expressions and Control Flow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-expr.html#built-in-semantic-values">Built-In Semantic Values</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#bool"><code class="docutils literal notranslate"><span class="pre">bool</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#numerics">Numerics</a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#maybe"><code class="docutils literal notranslate"><span class="pre">maybe</span> <span class="pre">...</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#t"><code class="docutils literal notranslate"><span class="pre">[T]</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#builders-for-arrays">Builders for Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#k-t"><code class="docutils literal notranslate"><span class="pre">[K</span> <span class="pre">-&gt;</span> <span class="pre">T]</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-expr.html#control-strucutres">Control Strucutres</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#if-then-else"><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">...</span> <span class="pre">then</span> <span class="pre">...</span> <span class="pre">else</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#guarding">Guarding</a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#case-of"><code class="docutils literal notranslate"><span class="pre">case</span> <span class="pre">...</span> <span class="pre">of</span> <span class="pre">...</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#loops">Loops</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ppm-breakdown-expr.html#for"><code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">...</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="ppm-breakdown-expr.html#map"><code class="docutils literal notranslate"><span class="pre">map</span> <span class="pre">...</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ppm-breakdown-expr.html#more-on-types">More on Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#annotating-types">Annotating Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#unknown-types">Unknown Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="ppm-breakdown-expr.html#type-coercion">Type Coercion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extended-ex-intro.html">Extended Exercise: The PNG Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="extended-ex-parsers.html">Aside: What To (Not) Do While Parsing</a></li>
<li class="toctree-l1"><a class="reference internal" href="extended-ex-stdlib.html">Aside: The DaeDaLus Standard Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-stdlib.html#endianness">Endianness</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-stdlib.html#floating-point-numbers">Floating-Point Numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-stdlib.html#guarding-and-consuming-everything">Guarding and Consuming Everything</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-stdlib.html#manipulating-input-streams">Manipulating Input Streams</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extended-ex-utils.html">Extended Exercise: Defining Helpful Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-utils.html#domain-specific-parser-names">Domain-Specific Parser Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-utils.html#null-terminated-strings">Null-terminated Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-utils.html#common-structures">Common Structures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extended-ex-chunks.html">Extended Exercise: PNG Chunks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-chunks.html#introducing-bitdata">Introducing <code class="docutils literal notranslate"><span class="pre">bitdata</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-chunks.html#png-chunk-types">PNG Chunk Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-chunks.html#png-chunk-data">PNG Chunk Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#plte">PLTE</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#idat">IDAT</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#trns">tRNS</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#chrm">cHRM</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#gama">gAMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#iccp">iCCP</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#sbit">sBIT</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#srgb">sRGB</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#text">tEXt</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#ztxt">zTXt</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#itxt">iTXt</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#bkgd">bKGD</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#hist">hIST</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#phys">pHYs</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#splt">sPLT</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#time">tIME</a></li>
<li class="toctree-l3"><a class="reference internal" href="extended-ex-chunks.html#generic-chunk-data-parsing">Generic Chunk Data Parsing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-chunks.html#png-chunks">PNG Chunks</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-chunks.html#header-trailer">Header / Trailer</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-chunks.html#full-png">Full PNG</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-ex-chunks.html#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extended-ex-solution.html">Extended Exercise: Full Solution</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Daedalus</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Getting Started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorial/getting-started.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<span id="id1"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline"></a></h1>
<p><strong>DaeDaLus</strong> is a domain-specific programming language for specifying
<em>parsers</em>. It supports <em>data-dependent</em> parsing, meaning that the behavior of
a parser can be effected by the <em>semantic values</em> parsed from other parts of
the input. This makes DaeDaLus extremely well-suited for the concise and
precise specification of both text and binary formats.</p>
<p>These parser specifications may be directly applied to inputs via the
<code class="docutils literal notranslate"><span class="pre">daedalus</span></code> interpreter to produce serialized representations of the resulting
semantic values, <em>or</em> the specifications may be compiled to either Haskell or
C++ sources for parsers to be used in larger software ecosystems.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This tutorial assumes that you have a working knowledge of common
programming concepts and are comfortable working at the command-line.
Familiarity with functional programming will be particularly helpful,
but is not a strict requirement - any concepts needed will be covered
in the relevant sections.</p>
</div>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline"></a></h2>
<p>DaeDaLus currently has no binary releases available for installation, but can
be easily built and installed from source.</p>
<p>Since DaeDaLus is implemented in Haskell, you will need a suitable Haskell
environment; the easiest way to set this up is with
<a class="reference external" href="https://www.haskell.org/ghcup/">ghcup</a>. Simply follow the instructions on
that page, and you will have the ability to install the necessary components to
build DaeDaLus.</p>
<p>At the time of this writing, we recommend that you use <code class="docutils literal notranslate"><span class="pre">ghcup</span></code> to install
GHC 8.10.7 and Cabal 3.6.2.0:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; ghcup install ghc <span class="m">8</span>.10.7 <span class="o">&amp;&amp;</span> ghcup <span class="nb">set</span> ghc <span class="m">8</span>.10.7
&gt; ghcup install cabal <span class="m">3</span>.6.2.0 <span class="o">&amp;&amp;</span> ghcup <span class="nb">set</span> cabal <span class="m">3</span>.6.2.0
</pre></div>
</div>
<p>If you prefer, you can run <code class="docutils literal notranslate"><span class="pre">ghcup</span> <span class="pre">tui</span></code> to interactively install and set
default GHC and Cabal versions.</p>
<p>With Haskell installed, clone
<a class="reference external" href="https://github.com/GaloisInc/daedalus">the DaeDaLus repository</a>. Once
cloned, <code class="docutils literal notranslate"><span class="pre">cd</span></code> into the repository root and run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; cabal install exe:daedalus --installdir<span class="o">=</span>DIR <span class="se">\</span>
                             --overwrite-policy<span class="o">=</span>always
</pre></div>
</div>
<p>This will build and install the executable <code class="docutils literal notranslate"><span class="pre">daedalus</span></code>, placing links to the
executable in the directory <code class="docutils literal notranslate"><span class="pre">DIR</span></code>. We recommend setting this installation
directory to something on your <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, so that the interpreter can be invoked
simply as <code class="docutils literal notranslate"><span class="pre">daedalus</span></code> at the command-line – the remainder of this tutorial
assumes this setup for brevity. The <code class="docutils literal notranslate"><span class="pre">--verwrite-policy=always</span></code> flag will make
sure that, if you clone a new version of <code class="docutils literal notranslate"><span class="pre">daedalus</span></code>, this installation step
will overwrite the existing versions of the executable installed on the system.</p>
</section>
<section id="daedalus-syntax-highlighting-editing-modes">
<h2>DaeDaLus Syntax Highlighting / Editing Modes<a class="headerlink" href="#daedalus-syntax-highlighting-editing-modes" title="Permalink to this headline"></a></h2>
<p>The DaeDaLus repository ships with a major Emacs mode definition and syntax
highlighters for both Vim and VSCode. Please see your editor’s documentation
for details on how to install these extra features.</p>
</section>
<section id="your-first-daedalus-specification">
<h2>Your First DaeDaLus Specification<a class="headerlink" href="#your-first-daedalus-specification" title="Permalink to this headline"></a></h2>
<p>In order to give a feel for what DaeDaLus specifications look like, we now
present a well-known image format, PPM, and a DaeDaLus parser for it. This
example will be broken down in detail in the following sections of the
tutorial as a means of exploring the available language features.</p>
<section id="the-portable-pixmap-format">
<h3>The Portable PixMap Format<a class="headerlink" href="#the-portable-pixmap-format" title="Permalink to this headline"></a></h3>
<p>PPM is a simple image format designed to make exchange between different
platforms easy. For the purposes of this introduction, we’ll be looking
specifically at the ASCII PPM format, which describes color RGB images in a
human-readable format. Informally, this format consists of:</p>
<ol class="arabic simple">
<li><p>A magic number identifying the file type (for ASCII PPM, this is <code class="docutils literal notranslate"><span class="pre">P3</span></code>)</p></li>
<li><p>The dimensions of the image (width then height)</p></li>
<li><p>The maximum color value</p></li>
<li><p>A ‘matrix’ of RGB triples for each pixel defined in row-major order</p></li>
</ol>
<p>The format also allows for single-line comments, but we will ignore these for
now.</p>
</section>
<section id="an-example-ppm-image">
<h3>An Example PPM Image<a class="headerlink" href="#an-example-ppm-image" title="Permalink to this headline"></a></h3>
<p>Here is a small example of a PPM image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P3</span>
<span class="mi">4</span> <span class="mi">4</span>
<span class="mi">15</span>
 <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>    <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>    <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>   <span class="mi">15</span>  <span class="mi">0</span> <span class="mi">15</span>
 <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>    <span class="mi">0</span> <span class="mi">15</span>  <span class="mi">7</span>    <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>    <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>
 <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>    <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>    <span class="mi">0</span> <span class="mi">15</span>  <span class="mi">7</span>    <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>
<span class="mi">15</span>  <span class="mi">0</span> <span class="mi">15</span>    <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>    <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>    <span class="mi">0</span>  <span class="mi">0</span>  <span class="mi">0</span>
</pre></div>
</div>
<p>We can match this up with the format description given above:</p>
<ol class="arabic simple">
<li><p>The magic number is <code class="docutils literal notranslate"><span class="pre">P3</span></code>, indicating an ASCII RGB image</p></li>
<li><p>The width and height are both <code class="docutils literal notranslate"><span class="pre">4</span></code></p></li>
<li><p>The maximum color value is <code class="docutils literal notranslate"><span class="pre">15</span></code></p></li>
<li><p>There is a four-by-four grid of triples, one triple per pixel</p></li>
</ol>
</section>
<section id="a-daedalus-ppm-specification">
<h3>A DaeDaLus PPM Specification<a class="headerlink" href="#a-daedalus-ppm-specification" title="Permalink to this headline"></a></h3>
<p>Our goal now is to provide a DaeDaLus specification for this format, so that we
may parse well-formed PPM values into semantic values for further processing in
Haskell or C++ (you might imagine we are writing a program to transform images
represented in this PPM format.) Here it is:</p>
<div class="highlight-DaeDaLus notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">Main</span> <span class="k">=</span> <span class="p">{</span>
  <span class="k">$$</span> <span class="k">=</span> <span class="n">PPM</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">def</span> <span class="n">Token</span> <span class="n">P</span> <span class="k">=</span> <span class="p">{</span>
  <span class="k">$$</span> <span class="k">=</span> <span class="n">P</span><span class="p">;</span>
  <span class="k">Many</span> <span class="p">(</span><span class="m">1</span><span class="p">..)</span> <span class="n">WS</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">def</span> <span class="n">PPM</span> <span class="k">=</span> <span class="p">{</span>
  <span class="k">Match</span> <span class="s">&quot;P&quot;</span><span class="p">;</span>
  <span class="k">@</span><span class="n">version</span> <span class="k">=</span> <span class="n">Token</span> <span class="n">Natural</span><span class="p">;</span>
  <span class="n">version</span> <span class="k">==</span> <span class="m">3</span> <span class="k">is</span> <span class="l">true</span><span class="p">;</span>
  <span class="n">width</span>  <span class="k">=</span> <span class="n">Token</span> <span class="n">Natural</span><span class="p">;</span>
  <span class="n">height</span> <span class="k">=</span> <span class="n">Token</span> <span class="n">Natural</span><span class="p">;</span>
  <span class="n">maxVal</span> <span class="k">=</span> <span class="n">Token</span> <span class="n">Natural</span><span class="p">;</span>
  <span class="n">data</span>   <span class="k">=</span> <span class="k">Many</span> <span class="n">height</span> <span class="p">(</span><span class="k">Many</span> <span class="n">width</span> <span class="n">RGB</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">def</span> <span class="n">RGB</span> <span class="k">=</span> <span class="p">{</span>
  <span class="n">red</span>   <span class="k">=</span> <span class="n">Token</span> <span class="n">Natural</span><span class="p">;</span>
  <span class="n">green</span> <span class="k">=</span> <span class="n">Token</span> <span class="n">Natural</span><span class="p">;</span>
  <span class="n">blue</span>  <span class="k">=</span> <span class="n">Token</span> <span class="n">Natural</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">def</span> <span class="n">WS</span> <span class="k">=</span> <span class="n">Match1</span> <span class="p">(</span><span class="m">0</span> <span class="k">|</span> <span class="m">9</span> <span class="k">|</span> <span class="m">12</span> <span class="k">|</span> <span class="m">32</span> <span class="k">|</span> <span class="s">&#39;\n&#39;</span> <span class="k">|</span> <span class="s">&#39;\r&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="n">Natural</span> <span class="k">=</span> <span class="p">{</span>
  <span class="k">@</span><span class="n">ds</span> <span class="k">=</span> <span class="k">Many</span> <span class="p">(</span><span class="m">1</span><span class="p">..)</span> <span class="n">Digit</span><span class="p">;</span>
  <span class="k">^</span> <span class="k">for</span> <span class="p">(</span><span class="n">val</span> <span class="k">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">d</span> <span class="k">in</span> <span class="n">ds</span><span class="p">)</span> <span class="p">(</span><span class="n">addDigit</span> <span class="n">val</span> <span class="n">d</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">def</span> <span class="n">Digit</span> <span class="k">=</span> <span class="p">{</span>
  <span class="k">@</span><span class="n">d</span> <span class="k">=</span> <span class="n">Match1</span> <span class="p">(</span><span class="s">&#39;0&#39;</span> <span class="p">..</span> <span class="s">&#39;9&#39;</span><span class="p">);</span>
  <span class="k">^</span> <span class="n">d</span> <span class="o">-</span> <span class="s">&#39;0&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">def</span> <span class="n">addDigit</span> <span class="n">val</span> <span class="n">d</span> <span class="k">=</span>
  <span class="m">10</span> <span class="o">*</span> <span class="n">val</span> <span class="o">+</span> <span class="p">(</span><span class="n">d</span> <span class="k">as</span> <span class="k">uint</span> <span class="m">64</span><span class="p">)</span>
</pre></div>
</div>
<p>You may notice that this specification does not perform any <em>validation</em> of the
image data – later, we’ll discuss the pros and cons of including validation in
parsers, and some strategies for deciding whether or not that is best left to
other parts of the application consuming the formatted data. For now, let’s
break down this example to understand the building blocks of parser
specifications.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../implicit-parameters.html" class="btn btn-neutral float-left" title="Implicit Parameters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ppm-breakdown.html" class="btn btn-neutral float-right" title="Breaking Down the PPM Specification" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, The Daedalus Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>