<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Help &mdash; Daedalus 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/design-tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Language Reference" href="../user-guide/index.html" />
    <link rel="prev" title="The Command-Line Tools" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Daedalus
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">The Command-Line Tools</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Getting Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-show-types">Command <code class="docutils literal notranslate"><span class="pre">show-types</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-run">Command <code class="docutils literal notranslate"><span class="pre">run</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-compile-hs">Command: <code class="docutils literal notranslate"><span class="pre">compile-hs</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-compile-c">Command: <code class="docutils literal notranslate"><span class="pre">compile-c++</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generated-files">Generated Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flags">Flags</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#command-dump">Command: <code class="docutils literal notranslate"><span class="pre">dump</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">Language Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Daedalus</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">The Command-Line Tools</a> &raquo;</li>
      <li>Getting Help</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tool-docs/daedalus.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-help">
<h1>Getting Help<a class="headerlink" href="#getting-help" title="Permalink to this headline"></a></h1>
<p>To see a list of available commands and options that apply to all commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>daedalus --help
</pre></div>
</div>
<p>To see a list of options for a specific command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>daedalus COMMAND --help
</pre></div>
</div>
</section>
<section id="command-show-types">
<h1>Command <code class="docutils literal notranslate"><span class="pre">show-types</span></code><a class="headerlink" href="#command-show-types" title="Permalink to this headline"></a></h1>
<p>To type-check a DaeDaLus specification and see the types of the declarations:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>daedalus show-types MyParserSpec.ddl
</pre></div>
</div>
<p>The command prints information about the types and parsers defined by
the given specification.  For example:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Sample output for <code class="docutils literal notranslate"><span class="pre">show-types</span></code></span><a class="headerlink" href="#id1" title="Permalink to this code"></a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Types
======

def List a =
  union
    nil: {}
    cons: NonEmptyList a

def NonEmptyList a =
  struct
    head: a
    tail: List a


Parsers and Semantic Values
===========================

def List:
  for any type a:
  parameter: parser of a
  defines: parser of List a

def NonEmptyList:
  for any type a:
  parameter: parser of a
  defines: parser of NonEmptyList a

def Main:
  defines: parser of List (uint 8)
</pre></div>
</div>
</div>
<p>The resulting types have the following form:</p>
<div class="highlight-DaeDaLus notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="n">ParserName</span><span class="p">:</span>
  <span class="n">parameter</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">type</span> <span class="n">A</span><span class="o">&gt;</span>
  <span class="n">parameter</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">type</span> <span class="n">B</span><span class="o">&gt;</span>
  <span class="p">...</span>
  <span class="n">defines</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">type</span> <span class="n">C</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This resembles a C type declaration as follows:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="n">C</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ParserName</span><span class="p">(</span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="n">A</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="n">B</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p">...);</span><span class="w"></span>
</pre></div>
</div>
<p>The types themselves may be simple types such as integers or arrays, but they
often have the form <code class="docutils literal notranslate"><span class="pre">parser</span> <span class="pre">of</span> <span class="pre">&lt;type</span> <span class="pre">A&gt;</span></code>. This indicates that the parameter or
result is a parser, that itself generates semantic values of type <code class="docutils literal notranslate"><span class="pre">A</span></code>.</p>
</section>
<section id="command-run">
<h1>Command <code class="docutils literal notranslate"><span class="pre">run</span></code><a class="headerlink" href="#command-run" title="Permalink to this headline"></a></h1>
<p>This command is used to run a DaeDaLus specification using the interpreter:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>daedalus run MyParserSpec.ddl --input<span class="o">=</span>input.txt
</pre></div>
</div>
<p>This command will run the parser defined in <code class="docutils literal notranslate"><span class="pre">MyParserSpec.ddl</span></code> on the
input from file <code class="docutils literal notranslate"><span class="pre">input.txt</span></code>.</p>
<p>If successful, the resulting semantic value will be shown on <code class="docutils literal notranslate"><span class="pre">stdout</span></code>.</p>
<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--input=FILE</span></span></dt>
<dd><p>Specifies that the input for the parser should be read from the given file.
If no <code class="docutils literal notranslate"><span class="pre">--input</span></code> is specified, then the interpreter will run with
an empty input.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--entry=[MODULE.]NAME</span></span></dt>
<dd><p>Specifies which parser defined by the specification should be executed.
If no <code class="docutils literal notranslate"><span class="pre">--entry</span></code> is specified, then the interpreter will
run the parser called <code class="docutils literal notranslate"><span class="pre">Main</span></code>.</p>
<p>The entry parser should have a fixed type (i.e., it should not be
polymorphic) and it should not have any parameters, implicit or explicit.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--json</span></span></dt>
<dd><p>Show the parsed semantic valus using a JSON based format.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--html</span></span></dt>
<dd><p>Show the parsed semantic value rendered as HTML.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--core</span></span></dt>
<dd><p>Use the Core IR interpreter.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--vm</span></span></dt>
<dd><p>Use the VM IR interpreter.</p>
</dd></dl>

</section>
<section id="command-compile-hs">
<h1>Command: <code class="docutils literal notranslate"><span class="pre">compile-hs</span></code><a class="headerlink" href="#command-compile-hs" title="Permalink to this headline"></a></h1>
<p>To compile a DaeDaLus parser specification to Haskell:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>daedalus compile-hs MyParserSpec.ddl
</pre></div>
</div>
<p>The result is a Haskell module which contains definitions for the
parsers and functions defined in the specification.</p>
<p>To use the generated code you’d have to integrate it with a Haskell
project and also use the <code class="docutils literal notranslate"><span class="pre">rts-hs</span></code> package.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>At present the command <code class="docutils literal notranslate"><span class="pre">compile-hs</span></code> uses the <em>old</em> Haskell backend which
may go away in future.  To use the new backend, which is actively
maintained, please use Template Haskell.   If there is deman, we may adapt
the new backend to generate explcit Haskell files, in which case this
command will start using the new backend.</p>
</div>
</section>
<section id="command-compile-c">
<h1>Command: <code class="docutils literal notranslate"><span class="pre">compile-c++</span></code><a class="headerlink" href="#command-compile-c" title="Permalink to this headline"></a></h1>
<p>To compile a DaeDaLus package specification C++:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>daedalus compile-c++ MyParserSpec.ddl --out-dir<span class="o">=</span>some_dir_name
</pre></div>
</div>
<section id="generated-files">
<h2>Generated Files<a class="headerlink" href="#generated-files" title="Permalink to this headline"></a></h2>
<dl class="simple">
<dt>The compiled parser is in two files:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">main_parser.h</span></code> contains the interface to the generated parser, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">main_parser.cpp</span></code> contains the implementation of the parser.</p></li>
</ul>
</dd>
</dl>
<p>In addition, the DaeDaLus compiler may generate a sample executable driver
and <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> illustrating how to build the parser and generate Doxygen
documentation.  The sample executable expects that the compiled specification
contains a parser named <code class="docutils literal notranslate"><span class="pre">Main</span></code> that has a fixed type and no parameters
of any kind—if this is not the case, the sample driver will fail to compile.</p>
<p>The sample executable driver will be generated when:</p>
<blockquote>
<div><ul class="simple">
<li><p>there is no explicit <code class="docutils literal notranslate"><span class="pre">--entry</span></code> specified, and</p></li>
<li><p>there is no custom user state <code class="docutils literal notranslate"><span class="pre">--user-state</span></code></p></li>
</ul>
</div></blockquote>
</section>
<section id="flags">
<h2>Flags<a class="headerlink" href="#flags" title="Permalink to this headline"></a></h2>
<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--out-dir=DIRECTORY</span></span></dt>
<dd><p>Save generated files in the given directory.
The directory will be created if it does not exist.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--out-dir-header=DIRECTORY</span></span></dt>
<dd><p>Save generated header files in the given directory.
The directory will be created if it does not exist.
If this is not specified, then the headers will be saved in
<code class="docutils literal notranslate"><span class="pre">--out-dir</span></code></p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--file-root=STRING</span></span></dt>
<dd><p>Use the given string for the names of the generated parser
implementation and header.
If not specified this will be <code class="docutils literal notranslate"><span class="pre">main_parser</span></code>.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--user-namespace=NAMESPACE</span></span></dt>
<dd><p>Place generated type declarations in the given name space.
Note that at present this applies only to generate types.
Generated parser entry point always reside in the default namespace.
If this is not specified, this will be <code class="docutils literal notranslate"><span class="pre">User</span></code></p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--no-error-stack</span></span></dt>
<dd><p>Disable call stack tracking in errors.   Without this option,
we generate code that leads to more detailed parse error messaged,
at some runtime cost.   Adding this flag leads to less detailed
parse errors, but some potential performance gain.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--user-state=SATE_TYPE</span></span></dt>
<dd><p>Generate a parser where the parser’s state will be extended with
some user state of the given type.  This is useful in certain situations
(e.g., caching of data), but care needs to be taken that updates
to this state make sense even when the parsers backtracks.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--add-include=INCLUDE</span></span></dt>
<dd><p>Add an additoinal <cite>#include</cite> to the generated parser header file.
Typically, this is used to support custom user state, or integration
with an pre-compiled DaeDaLus parser.  The parameter should just contain
the thing to be incuded (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;file.h&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;file.h&gt;</span></code>).</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--entry=[MODULE.]NAME</span></span></dt>
<dd><p>Declare that the given parser is an entry point for the generated parser.
Specifying an entry point will disable the genration of a sample driver
executable.  The name of the C++ function corresponding to DaeDaLus
declaration <code class="docutils literal notranslate"><span class="pre">F</span></code> is <code class="docutils literal notranslate"><span class="pre">parseF</span></code>.  The entry point should have a fixed
type, but MAY have argument.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Sample entry point for parser <code class="docutils literal notranslate"><span class="pre">Main</span></code> with no extra arguments,
returning a semantic value of type <code class="docutils literal notranslate"><span class="pre">T</span></code>.</span><a class="headerlink" href="#id2" title="Permalink to this code"></a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">parseMain</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">DDL</span><span class="o">::</span><span class="n">ParseError</span><span class="w"> </span><span class="o">&amp;</span><span class="n">error</span><span class="w"></span>
<span class="w">               </span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">results</span><span class="w"></span>
<span class="w">               </span><span class="p">,</span><span class="w"> </span><span class="n">DDL</span><span class="o">::</span><span class="n">Input</span><span class="w">      </span><span class="n">input</span><span class="w"></span>
<span class="w">               </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<p>If an extry point has arguments, they’ll come after the <code class="docutils literal notranslate"><span class="pre">input</span></code> argument.
The entry point returns any parsed semantic values in the <code class="docutils literal notranslate"><span class="pre">results</span></code> vector,
there could be multiple results if the grammar is ambiguous.  If there
are no results (i.e., <code class="docutils literal notranslate"><span class="pre">results</span></code> is empty), then <code class="docutils literal notranslate"><span class="pre">error</span></code> will contain
information about the parser error.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--inline</span></span></dt>
<dd><p>Perform agressive inlinining—all parsers that can be inlined will be
inlinined at each use site.  Sometimes this may improve performance, but
sometimes it may reduce it, due to a significant increase in the size
of the generate code.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--inlinine-this=[MODULE.]NAME</span></span></dt>
<dd><p>Inline uses of a specific parser.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--extern=MODULE[:NAMESPACE]</span></span></dt>
<dd><p>Do not generate declarations for the types declared in the given module.
This is useful when interfacing with a pre-compiled DaeDaLus parser,
which already contains declarations for the given types.  Often, this
option will be comined with <code class="docutils literal notranslate"><span class="pre">add-include</span></code> to include the declarations
of the already compiled code.  If a namespace is provided, then uses of
types in the given module will be qualified with the given namespace.
Otherwise, the default namespace <code class="docutils literal notranslate"><span class="pre">User</span></code> will be used.</p>
</dd></dl>

</section>
</section>
<section id="command-dump">
<h1>Command: <code class="docutils literal notranslate"><span class="pre">dump</span></code><a class="headerlink" href="#command-dump" title="Permalink to this headline"></a></h1>
<p>This command is largely for debuging.  It shows the various IR structures
of the DaeDaLus compiler.</p>
<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--parsed</span></span></dt>
<dd><p>Show the results of just parsing a specification.  This ensures that
a specification is syntactically correct.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--resolved</span></span></dt>
<dd><p>Show the results of name resultion.  This associates uses of names
with their definitions.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--tc</span></span></dt>
<dd><p>Show the results of type-checking.  This validates the specification
and esnures that parsers are used correctly (e.g. have the correct
number of arguments with the correct types).  The <code class="docutils literal notranslate"><span class="pre">dump</span></code> command
will show this phase, unless another is specified.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--spec</span></span></dt>
<dd><p>Show the IR after <em>specialization</em>.  Specialization eliminates
polymorphism and parsers with other parsers as arguments.
This works by generating custom instances of a parser
(similar to C++ template expansion).  After this pahse,
parsers are monomorphic and have only semantic values as parameters.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--core</span></span></dt>
<dd><p>Show the Core IR representation.  A number of DaeDaLus constructs
are desugared into simpler constructs.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">--vm</span></span></dt>
<dd><p>This is the lowest level IR, which is used to generate code.
It is essentially a control flow graph in SSA form, except that
instead of using “phi” blocks, basic blocks have parameters.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="The Command-Line Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../user-guide/index.html" class="btn btn-neutral float-right" title="Language Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, The Daedalus Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>